<div class = "d-flex flex-column justify-content-center"> 
  <% if @cart_products.blank? %>
    <p class="h2 text-center">Your Cart is Empty</p>
  <% else %>
    <p class="h2 text-center">My Cart</p>

    <div class = "row m-5">
      <div class="col-md-8">
        <% @cart_products.each do |cart_product| %>
          <div class = "row" style = "border: 1px solid black; ">

            <div class = "col-md-3" style = "border: 1px solid black; padding-left: 230px;">
              <%= image_tag(Product.find_by(id: cart_product.product_id).images.first, style: "width: 10rem; height: 10rem;") %>
            </div>

            <div class = "col-md-9" style = "border: 1px solid black; padding-left: 230px; padding-top: 20px">

              <div class = "d-flex flex-column">
                <p><%= Product.find_by(id: cart_product.product_id).name %></p>
                <p>$<%= Product.find_by(id: cart_product.product_id).price %></p>
              </div>

              <div class = "d-flex">

                <span class = "ps-0 p-2">Quantity :</span>
                <span class = "p-2"><%= cart_product.quantity %></span>
                
                <div class = "d-flex">
                  <%= form_with(url: cart_increase_path) do |f| %>
                    <%= f.hidden_field :id, value: cart_product.id %>
                    <%= button_tag(class: "btn") do %>
                      <i class="bi bi-plus-circle"></i>
                    <% end %>
                  <% end %>

                  <%= form_with(url: cart_decrease_path) do |f| %>
                    <%= f.hidden_field :id, value: cart_product.id %>
                    <%= button_tag(class: "btn") do %>
                      <i class="bi bi-dash-circle"></i>
                    <% end %>
                  <% end %>

                </div>
                
              </div> 
            </div>
          </div>
        <% end %> 
      </div>

      <div class = "col-md-4 d-flex flex-column">
        <% @cart_products.each do |cart_product| %>
          <div>
            <span><%= Product.find_by(id: cart_product.product_id).name %></span>
            <span>$<%= Product.find_by(id: cart_product.product_id).price %></span>
          </div>
        <% end %>
        
        <% total = 0 %>

        <% @cart_products.each do |cart_product| %>
          <div>
            <% total = total + Product.find_by(id: cart_product.product_id).price * cart_product.quantity %>
          </div>
        <% end %>

        <%= @total %>
      </div>
    <div>
  <% end %>
</div>

